<!DOCTYPE html>
<html lang="en">
<head>
  <title>Oman Offers - عروض سلطنة عمان </title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
  
<meta name="propeller" content="e2719cd37103fbd8c1413ff48d27b0bd">
  <style>

  .fakeimg {
    height: 200px;
    background: #aaa;
  }
  
input[type=text], select {
  width: 100%;
  padding: 12px 20px;
  margin: 8px 0;
  display: inline-block;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-sizing: border-box;
}

input[type=button] {
  width: 100%;
  background-color: #4CAF50;
  color: white;
  padding: 14px 20px;
  margin: 8px 0;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

input[type=button]:hover {
  background-color: #45a049;

  </style>

</head>
<body>
<div class="jumbotron text-center" style="margin-bottom:0">
 <h1>   Oman Offers 
      <br/>
      عروض سلطنة عمان </h1>
    
  
  <img    src="omanOffers.jpg"  width="150" height="150" id ="logoidheader"  >
</div>

<nav class="navbar navbar-expand-sm bg-dark navbar-dark">
  <a class="navbar-brand" href="#">Navbar</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="collapsibleNavbar">
    <ul class="navbar-nav">
         <li class="nav-item">
        <a class="nav-link" href="index.html">Home</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="OmanOffersWeb-Privacy.html">Privacy Policy</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="contactUs.html">Contact us</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="about.html">About</a>
      </li>
      
       <li class="nav-item">
        <a class="nav-link" href="https://play.google.com/store/apps/details?id=moh.com.darwish.mmd.OmanOffers">Download Android App</a>
      </li>
    </ul>
  </div>
</nav>

        
        
<div class="container" style="margin-top:30px">

 <div class="row" id="inputFields">
        
          
    <form class="form-inline">
	
	    <div class="form-group pl-1" >

    <label for="hyperName" >Hyper Name</label>
    <input type="text" id="hyperName" name="hypername" placeholder="Your name..">

	        </div>

	    <div class="form-group pl-1" >

    <label for="hyperKey">Key</label>
    <input type="text" id="hyperKey" name="key" placeholder="Your last name..">
	
	        </div>
     <div class="col-xs-2 pl-1">
      <input type="button" value="Check" onclick="checkIndex()">
	              </div>
			 <div class="col-xs-2 pl-1">

      <input type="button" value="Double Check" onclick="doubleCheck()">
 </div>
  <div class="col-xs-2 pl-1">

      <input type="button" value="Delete" onclick="deleteItem()">
 </div>

	 </form>
   

     <form>

     <label for="hyperKey">En Text</label>
    <input type="text" id="enText" name="key" placeholder="Your last name..">
	


     <label for="hyperKey">Ar Text</label>
    <input type="text" id="arText" name="key" placeholder="Your last name..">
	
	       

				 <br>
   

     <label for="details">Details</label>
    <input type="text" id="details" name="key" placeholder="Your last name..">
	
	       


     <label for="hyperKey">IMG Nu</label>
    <input type="text" id="imgNo" name="key" placeholder="Your last name..">
	
	      

    

	  

     <label for="hyperKey">part1</label>
    <input type="text" id="part1Id" name="key" placeholder="Your last name..">
	


 <label for="hyperKey">part2</label>
    <input type="text" id="part2Id" name="key" placeholder="Your last name..">
           </form>
  
    <form class="form-inline" >

	    <div class="form-group pl-1 col-xs-6 pl-1" >

			 <div class="col-xs-2 pl-1" >
      <input type="button" value="Check" onclick="checkIndex()">
	              </div>
			 <div class="col-xs-2 pl-1" >

      <input type="button" value="Double Check" onclick="doubleCheck()">
 </div>
			 <div class="col-xs-2 pl-1" >
    <input type="button" value="Update Item" onclick="updateItem()">
	 </div>
			 <div class="col-xs-2 pl-1" >
        <input type="button" value="New Item" onclick="newItem()">

        </div>
        <div class="col-xs-2 pl-1" >
        <input type="button" value="New Item-New" onclick="newItem2()">

        </div>

        
  </form>
        
        <p id="logo" > aaaaa </p>
        
         <p id="pdf" > aaaaa </p>
        <p id="details" > aaaaa </p>
        <p id="no" > aaaaa </p>
          <p id="imgno" > aaaaa </p>
          <p id="name" > aaaaa </p>

       

    </div> 
          
      
    <div>
        
        <table class="table table-striped" >
  <thead>
      <tr>
        <th>FOLDER</th>
        <th>INDEX</th>
        <th>DATES</th>
       <th>EN</th>

      </tr>
    </thead>
    <tbody id="table">
      <tr >
        <td id="tr1">John</td>
        <td>Doe</td>
        <td>john@example.com</td>
      </tr>
      <tr id="tr2">
        <td>Mary</td>
        <td>Moe</td>
        <td>mary@example.com</td>
      </tr>
      <tr id="tr3">
        <td>July</td>
        <td>Dooley</td>
        <td>july@example.com</td>
      </tr>
    </tbody>
        </table>
    </div>


        
    </div>  

        
         <div class="row">
    </div>
    

        <div class="row">

  
           <div class="col-sm-6" id="divNo1">
        
    <h4 id ="h2id2">    </h4>
<img     style="width:40%" id ="logoid2"  onerror="errorFunction()" >

     

      <ul style="list-style-type:none;" id = "textList2">
          <li id="liElement"> 
              <img     style="width:40%" id ="logo2" onerror="errorFunction()">  
              <p id ="btn2">  
              </p>
                <a id ="linkId2"  >   </a>
             
          </li> 
          
          
      </ul>
       <ul style="list-style-type:none;" id = "textList3">
          <li id="liElement"> 
              <img     style="width:40%" id ="logo2" onerror="errorFunction()">  
              <p id ="btn2">  
              </p>
                <a id ="linkId2"  >   </a>
             
          </li> 
          
          
      </ul>

      </div>  

      <div class="col-sm-6">
        
 <div  class="row">
   <h2 id ="testP"> </h2>
      <h5 id ="textDetails">  </h5>
      
      
       <h2 id ="detailsHeader1"> </h2>
      <h5 id ="detailsHeader2">  </h5>

      <br/>
        <br/>
    <img alt =" " id="imgOffers" src="finished.jpg" style="width:80%" class = "center" onerror="errorFunction()">
       
    <br/>
        <br/>
  </div>

    <div  id ="bu" class="row">
        <button class="col-sm-2"  onclick="backButton()">Back</button>
        <button  class="col-sm-2" onclick="nextButton()">Next</button>
        <p class="col-sm-2" id="pageNo" >  page number   </p>
    </div>
    <br/>
        <br/>
    <h4 id ="h2id">    </h4>
<img     style="width:40%" id ="logoid"  onerror="errorFunction()" >

     
      <ul style="list-style-type:none;" id = "textList">
          <li> 
              <img     style="width:40%" id ="logo" onerror="errorFunction()">  
              <p id ="btn">  
              </p>
                <a id ="linkId"  >   </a>
             
          </li> 
          
          
      </ul>
      

      
</div>
            
            </div>  
       
       

 
<!--
<div class="jumbotron text-center" style="margin-bottom:0">
  <p>Footer</p>
</div>
-->
    <!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/6.6.1/firebase-app.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->

<script src="https://www.gstatic.com/firebasejs/6.6.1/firebase-database.js"></script>
<script>
  // Your web app's Firebase configuration
 var firebaseConfig = {
    apiKey: "AIzaSyCtFYjw0pGqxWKIqVae7vy8Mp1Sry6KdsA",
    authDomain: "anas-4a5b4.firebaseapp.com",
    databaseURL: "https://anas-4a5b4-default-rtdb.firebaseio.com",
    projectId: "anas-4a5b4",
    storageBucket: "anas-4a5b4.appspot.com",
    messagingSenderId: "877093318679",
    appId: "1:877093318679:web:fb844f998204cb6196ac52"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);

var indexString;
var part1;
var part2;
var twoParts4;
var imgno2 ; 
var n=1;
 var i=0;
var rootRef =firebase.database().ref().child('QatarIndex/' ).orderByChild("no");


function checkIndex(){
 

            var i = document.getElementById("hyperName").value;

           var rootRef2 =firebase.database().ref().child('QatarDetails/').child(i);

           rootRef2.once('value', function(snapshot2) {
           snapshot2.forEach(function(childSnapshot2) {
           var childKey2 = childSnapshot2.key;
           var childData2 = childSnapshot2.val();

         /*  if(childKey2>childKey2-1){
               document.getElementById("demo").innerText=childKey2;

           }*/

             var city = childSnapshot2.val().city;
            var part2 = childSnapshot2.val().part2;
            var ar = childSnapshot2.val().ar;
            var imgno = childSnapshot2.val().imgno;
            var details = childSnapshot2.val().details;

               var name = childSnapshot2.val().name;
           // document.getElementById("tr1").innerText=name;
            console.log(name);


            var table = document.getElementById("table");
            var row =table.insertRow(0);
             var col1 = row.insertCell(0);
            var col2 = row.insertCell(1);
             var col3 = row.insertCell(2);
             var col4 = row.insertCell(3);

                

            // var cell1 = row.insertCell(0);
                   col1.innerHTML = part2;
                   col2.innerHTML = childKey2;
                   col3.innerHTML = details;
                   col4.innerHTML = city;


              });
                   });

                   getSerial();

    
}


        function doubleCheck(){
            
            getSerial();
            var i = document.getElementById("hyperName").value;
           var x = document.getElementById("hyperKey").value;

            var rootRef2 =firebase.database().ref().child('QatarDetails/').child(i).child(x);

            rootRef2.once('value', function(snapshot2) {
                 var name = snapshot2.val().name;
                 var city = snapshot2.val().city;
                 var ar = snapshot2.val().ar;
                 var imgno = snapshot2.val().imgno;
                 var part1 = snapshot2.val().part1;
                 var part2 = snapshot2.val().part2;
               
                var pdf = snapshot2.val().pdf;
                 var logo = snapshot2.val().logo;
                 var details = snapshot2.val().details;
                 var no = snapshot2.val().no;


            // document.getElementById("demo").innerText=name;
             console.log(name);
          
        document.getElementById("hyperName").value=i;
             document.getElementById("arText").value=ar;
             document.getElementById("enText").value=city;
            document.getElementById("imgNo").value=imgno;
             document.getElementById("part1Id").value=part1;
             document.getElementById("part2Id").value=part2;
         document.getElementById("details").value=details;   

          document.getElementById("pdf").innerText=pdf;   
          document.createElement("br");
          document.getElementById("logo").innerText=logo;   
                    document.createElement("br");

                    document.createElement("br");
         document.getElementById("name").innerText=name;   

          document.getElementById("no").innerText=no;   
        //  document.getElementById("imgno").innerText=imgno;   

       

             
             
             
          /*      var table = document.getElementById("table");
                var row =table.insertRow(0);
                 var col1 = row.insertCell(0);
                var col2 = row.insertCell(1);
                 var col3 = row.insertCell(2);
                 var col4 = row.insertCell(3);


                // var cell1 = row.insertCell(0);
                     col1.innerHTML = name;
                     col2.innerHTML = city;
                     col3.innerHTML = part1;
                    col4.innerHTML = part2;  */


            });     

        }
      function getSerial(){
            var i = document.getElementById("hyperName").value;
           var x = document.getElementById("hyperKey").value;
                var rootRef2 =firebase.database().ref().child('QatarDetails/').child(i).orderByChild("no").limitToFirst(1);


            rootRef2.once('value', function(snapshot2) {
               
               
                snapshot2.forEach(function(childSnapshot2) {
            var childKey2 = childSnapshot2.key;
            var childData2 = childSnapshot2.val();
            
            var no = childSnapshot2.val().no;
              no--;
                
        console.log(no);
      
                document.getElementById("no").innerText=no;   


              });


 
             
             
        


            });     

        }     




       function newItem(){
           
           
           

            var i = document.getElementById("hyperName").value;
            var rootRef2 =firebase.database().ref().child('QatarDetails/').child(i);

            rootRef2.once('value', function(snapshot2) {
           

            snapshot2.forEach(function(childSnapshot2) {
            var childKey2 = childSnapshot2.key;
            var childData2 = childSnapshot2.val();
            
            /* var no = childSnapshot2.val().no; */
                  /* //  console.log(no); */

            var keyPlus = childKey2;
            if(childKey2>childKey2-1){
                

                childKey2++;

              document.getElementById("hyperKey").value=childKey2;

            }
            
          
            /*  if(no-1<no){
                //  no--;
                // rootRef2.child("no").set(no) ;

                }*/
                });
                
                
                
          
                
         var i = document.getElementById("hyperName").value;
           var x = document.getElementById("hyperKey").value;
            
        
          var ar= document.getElementById("arText").value;
         var  city=  document.getElementById("enText").value;
        var   imgno = parseInt(document.getElementById("imgNo").value);
          var part1=  document.getElementById("part1Id").value;
        var  part2=   document.getElementById("part2Id").value;
     var  details=   document.getElementById("details").value;

        var  pdf=  parseInt(document.getElementById("pdf").textContent) ;
        /* var  no=   parseInt(document.getElementById("no").textContent); */
        var  logo=   document.getElementById("logo").textContent;
             var  name=   document.getElementById("name").textContent;

        // var  imgno=  parseInt(document.getElementById("imgno").textContent);

                /* --no;
        console.log(no); */

        
            var rootRef2 =firebase.database().ref().child('QatarDetails/').child(i).child(x);
            addNo(i,x);
                rootRef2.child("ar").set(ar) ;
                 rootRef2.child("city").set(city) ;
                rootRef2.child("imgno").set(imgno) ;
                rootRef2.child("part1").set(part1) ;
                rootRef2.child("part2").set(part2) ;
            rootRef2.child("name").set(name) ;

        
                rootRef2.child("pdf").set(pdf) ;
                rootRef2.child("logo").set(logo) ;
                rootRef2.child("details").set(details) ;
          /* rootRef2.child("no").set(no) ; */
         
          
         
            });
   
            
       }
       
       


       function addNo(i,x){
            /* var i = document.getElementById("hyperName").value;
           var x = document.getElementById("hyperKey").value; */
             var rootRef5 =firebase.database().ref().child('QatarDetails').child(i).orderByChild("no").limitToFirst(1);
             

             rootRef5.once('value', function(snapshot5) {
              /* var childData5 = snapshot5.val();
              var childlogo = snapshot5.val().logo;


                console.log(childData5); */
             
               
                snapshot5.forEach(function(childSnapshot2) {
            var childKey2 = childSnapshot2.key;
			var childNo = childSnapshot2.val().no;
//             var childNo = childSnapshot2.child("no").val();
//             childNo--;
            console.log(childNo+'  '+childKey2);

            var rootRef6 =firebase.database().ref().child('QatarDetails').child(i).child(x);

            rootRef6.child("no").set(childNo);   

              });



             
             
        


            });     

        }  
   /*    function getSerial(i,x){
           
           
                var rootRef3 =firebase.database().ref().child('QatarDetails/').child(i).orderByChild("no").limitToFirst(1);
            var rootRef4 =firebase.database().ref().child('QatarDetails/').child(i).child(x);

            rootRef3.once('value', function(snapshot3) {
           

            snapshot3.forEach(function(childSnapshot3) {
            var childKey2 = childSnapshot3.key;
            var childData2 = childSnapshot3.val();
            
            var no = childSnapshot3.val().no;
            no--;
                    console.log(no);
      
      

                rootRef4.child("no").set(no) ;
              });});

                       
           
       }*/
    function updateItem(){
        
        
        
           var i = document.getElementById("hyperName").value;
           var x = document.getElementById("hyperKey").value;
            
        
          var ar= document.getElementById("arText").value;
         var  city=  document.getElementById("enText").value;
         var   imgno= parseInt(document.getElementById("imgNo").value);
          var part1=  document.getElementById("part1Id").value;
        var  part2=   document.getElementById("part2Id").value;
        var  details=   document.getElementById("details").value;
        var  no=   parseInt(document.getElementById("no").textContent);


            var rootRef2 =firebase.database().ref().child('QatarDetails/').child(i).child(x);

                rootRef2.child("ar").set(ar) ;
                 rootRef2.child("city").set(city) ;
                rootRef2.child("imgno").set(imgno) ;
                rootRef2.child("part1").set(part1) ;
                rootRef2.child("part2").set(part2) ;
                rootRef2.child("details").set(details) ;
                rootRef2.child("no").set(no) ;

                 
    }
	
	function deleteItem(){
        
        
        
           var i = document.getElementById("hyperName").value;
           var x = document.getElementById("hyperKey").value;
            
        
          var ar= document.getElementById("arText").value;
         var  city=  document.getElementById("enText").value;
         var   imgno= parseInt(document.getElementById("imgNo").value);
          var part1=  document.getElementById("part1Id").value;
        var  part2=   document.getElementById("part2Id").value;
        var  details=   document.getElementById("details").value;
        var  no=   parseInt(document.getElementById("no").textContent);


            var rootRef2 =firebase.database().ref().child('QatarDetails/').child(i).child(x);
			rootRef2.remove();

              /*  rootRef2.child("ar").set(ar) ;
                 rootRef2.child("city").set(city) ;
                rootRef2.child("imgno").set(imgno) ;
                rootRef2.child("part1").set(part1) ;
                rootRef2.child("part2").set(part2) ;
                rootRef2.child("details").set(details) ;
                rootRef2.child("no").set(no) ;*/
				

                 
    }


function myFunction(){
    // Get a reference to the database service
var database = firebase.database();

     var name = document.getElementById("hyperName").value;
     
       var x = document.getElementById("hyperKey").value;

  
  firebase.database().ref('QatarDetails/' + name).set({
    username: x
    /*email: email,
    profile_picture : imageUrl*/
  });
  
  
    
}



  function errorFunction(){
        
        
 //  document.getElementById('logoid').src="finished.jpg";
 // document.getElementById("testP").innerHTML = "The image could not be loaded.";

        
        
    }
</script>




</body>
</html>
